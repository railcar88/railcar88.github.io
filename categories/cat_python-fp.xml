<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../assets/xml/rss.xsl" media="all"?><rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Rail Car 88 (Posts about python fp)</title><link>http://railcar88.github.com/</link><description></description><atom:link href="http://railcar88.github.com/categories/cat_python-fp.xml" rel="self" type="application/rss+xml"></atom:link><language>en</language><lastBuildDate>Sun, 06 Aug 2017 19:56:44 GMT</lastBuildDate><generator>Nikola (getnikola.com)</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>A Python lambda in a Coconut (nutshell)</title><link>http://railcar88.github.com/blog/a-python-lambda-in-a-coconut-nutshell/</link><dc:creator>Scott Scites</dc:creator><description>&lt;div&gt;&lt;p&gt;I recently Googled for ways to destructure a Python dict. I found this code on stackoverflow:&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_c8f1918ce2124b73b0eaed03efaecf2d-1"&gt;&lt;/a&gt;&lt;span class="n"&gt;pluck&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;lambda&lt;/span&gt; &lt;span class="nb"&gt;dict&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;dict&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;arg&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;arg&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;div class="admonition note"&gt;
&lt;p class="first admonition-title"&gt;Note&lt;/p&gt;
&lt;p class="last"&gt;&lt;a class="reference external" href="https://stackoverflow.com/questions/2955412/python-destructuring-bind-dictionary-contents"&gt;https://stackoverflow.com/questions/2955412/python-destructuring-bind-dictionary-contents&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;From perusing the Coconut documentation, I remembered that Coconut has a special syntax for lambda. So I converted the pluck function to use the Coconut syntax. This is what it looks like now:&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_e3dab1c98a4843c68516b67819f6052d-1"&gt;&lt;/a&gt;&lt;span class="n"&gt;pluck&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;dict&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;dict&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;arg&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;arg&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;div class="admonition note"&gt;
&lt;p class="first admonition-title"&gt;Note&lt;/p&gt;
&lt;p class="last"&gt;&lt;a class="reference external" href="http://coconut-lang.org/"&gt;http://coconut-lang.org/&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="admonition note"&gt;
&lt;p class="first admonition-title"&gt;Note&lt;/p&gt;
&lt;p class="last"&gt;&lt;a class="reference external" href="http://coconut.readthedocs.io/en/master/DOCS.html#lambdas"&gt;http://coconut.readthedocs.io/en/master/DOCS.html#lambdas&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;You will notice that the lambda is removed in favor of arrow (-&amp;gt;). The placement also changed with the positioning of the arrow coming after the parameters dict and star args. The way I think about the operation of this function is that I am going to give the function a dict and any number of arguments. The expression inside the function loops through the args and yield each value associated with the arg from the dict. Each yielded value is assigned to the respective variable on the left.&lt;/p&gt;
&lt;p&gt;You might be wondering what the python code looks like after compilation. To compile the file_name.coco file you would run the following command:&lt;/p&gt;
&lt;pre class="code shell"&gt;&lt;a name="rest_code_2fa550867e344238bb17247ba875e44c-1"&gt;&lt;/a&gt;$ coconut file_name.coco --target &lt;span class="m"&gt;36&lt;/span&gt; --mypy
&lt;/pre&gt;&lt;p&gt;I pass the file to the Coconut compiler. In my case, I am targeting the Python 3.6.1 interpreter. Although MyPy isn't particularly useful for this code, I also ask Coconut to run the code against the MyPy type checker. The Python that Coconut outputs unsurprisingly looks like this:&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_4ad2ee23944c4ec8a289da6911102d87-1"&gt;&lt;/a&gt;&lt;span class="n"&gt;pluck&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;lambda&lt;/span&gt; &lt;span class="nb"&gt;dict&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;dict&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;arg&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;arg&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;div class="admonition note"&gt;
&lt;p class="first admonition-title"&gt;Note&lt;/p&gt;
&lt;p class="last"&gt;&lt;a class="reference external" href="http://mypy-lang.org/"&gt;http://mypy-lang.org/&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Now we have come full circle to our original code snippet.&lt;/p&gt;
&lt;p&gt;This is the usage of the function:&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_b709d74464c2415dbd444b4e858ff6ab-1"&gt;&lt;/a&gt;&lt;span class="n"&gt;upload_data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;
&lt;a name="rest_code_b709d74464c2415dbd444b4e858ff6ab-2"&gt;&lt;/a&gt;&lt;span class="n"&gt;upload_data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;"name"&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;"example"&lt;/span&gt;
&lt;a name="rest_code_b709d74464c2415dbd444b4e858ff6ab-3"&gt;&lt;/a&gt;&lt;span class="n"&gt;upload_data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;"description"&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;"this is a demo"&lt;/span&gt;
&lt;a name="rest_code_b709d74464c2415dbd444b4e858ff6ab-4"&gt;&lt;/a&gt;&lt;span class="n"&gt;upload_data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;"file_name"&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;"demo.png"&lt;/span&gt;
&lt;a name="rest_code_b709d74464c2415dbd444b4e858ff6ab-5"&gt;&lt;/a&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;description&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;file_name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pluck&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;upload_data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'name'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'description'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'file_name'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;I find this syntax more elegant. Often times with syntax small things add up to make something nicer. This is one way that Coconut makes it pleasant for me to use Python.&lt;/p&gt;&lt;/div&gt;</description><category>coconut</category><guid>http://railcar88.github.com/blog/a-python-lambda-in-a-coconut-nutshell/</guid><pubDate>Sun, 06 Aug 2017 17:39:09 GMT</pubDate></item></channel></rss>